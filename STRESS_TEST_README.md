# دليل اختبار الضغط على النظام

## الملفات المتاحة

### 1. simple_stress_test.py (الموصى به)
- يستخدم مكتبة `requests` القياسية فقط
- يعمل مع Python بدون مكتبات إضافية
- يستخدم threading للطلبات المتزامنة

### 2. stress_test.py (المتقدم)
- يستخدم `aiohttp` للطلبات غير المتزامنة
- أداء أفضل ولكن يحتاج تثبيت مكتبات إضافية

## طريقة التشغيل

### الطريقة الأولى (البسيطة):
```bash
cd backend
python simple_stress_test.py
```

### الطريقة الثانية مع معاملات:
```bash
python simple_stress_test.py --url http://localhost:5000 --requests 50
```

### اختبار endpoint محدد:
```bash
python simple_stress_test.py --endpoint /api/departments --requests 30
```

### الطريقة المتقدمة (بعد تثبيت المكتبات):
```bash
# تثبيت المكتبات المطلوبة
pip install -r requirements_test.txt

# تشغيل الاختبار المتقدم
python stress_test.py
```

## المعاملات المتاحة

- `--url`: رابط الخادم (افتراضي: http://localhost:5000)
- `--requests`: عدد الطلبات المتزامنة (افتراضي: 30)
- `--endpoint`: endpoint محدد للاختبار
- `--method`: نوع الطلب GET/POST (افتراضي: GET)

## تفسير النتائج

### المؤشرات المهمة:
- **معدل النجاح**: يجب أن يكون أعلى من 95%
- **الطلبات في الثانية (RPS)**: كلما زاد كان أفضل
- **متوسط وقت الاستجابة**: يجب أن يكون أقل من ثانية واحدة
- **الانحراف المعياري**: قيمة منخفضة تعني استقرار الأداء

### التقييم:
- ✅ **ممتاز**: معدل نجاح 99%+
- 👍 **جيد جداً**: معدل نجاح 95-99%
- 👌 **جيد**: معدل نجاح 90-95%
- ⚠️ **متوسط**: معدل نجاح 80-90%
- ❌ **ضعيف**: معدل نجاح أقل من 80%

## الأهداف من الاختبار

1. **اختبار الاستقرارية**: هل يتحمل النظام الضغط؟
2. **اكتشاف نقاط الضعف**: ما هي الـ endpoints الأبطأ؟
3. **قياس الأداء**: كم طلب يمكن للنظام معالجته؟
4. **اختبار الأمان**: هل هناك حماية من DDoS؟

## نصائح الاستخدام

1. **تأكد من تشغيل الخادم أولاً**:
```bash
cd backend
python app.py
```

2. **ابدأ بعدد قليل من الطلبات** ثم زد تدريجياً:
```bash
python simple_stress_test.py --requests 10
python simple_stress_test.py --requests 30
python simple_stress_test.py --requests 50
```

3. **راقب استهلاك الموارد** أثناء الاختبار
4. **اختبر endpoints مختلفة** للحصول على صورة شاملة

## أمثلة على الاستخدام

### اختبار شامل:
```bash
python simple_stress_test.py --url http://localhost:5000 --requests 30
```

### اختبار API محدد:
```bash
python simple_stress_test.py --endpoint /api/schedule/current --requests 50
```

### اختبار خادم بعيد:
```bash
python simple_stress_test.py --url https://yourserver.com --requests 20
```

## معلومات إضافية

- الاختبار يستغرق حوالي 1-2 دقيقة
- يتم حفظ النتائج في الذاكرة فقط
- لا يؤثر على البيانات الموجودة
- آمن للاستخدام على خوادم الإنتاج (بحذر)